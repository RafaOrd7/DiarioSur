<ui:composition template="/WEB-INF/templates/plantilla.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:define name="title">Enviar Anuncio</ui:define>

    <ui:define name="content">
        <c:choose>
            <c:when test="#{ctrlAutorizacion.checkAdm()}">


                <h:form enctype="multipart/form-data" id="form">
                    <p:panel header="Nuevo anuncio" style="margin-bottom:10px;">
                        <table>
                            <tr>
                                <td>Subir imagen:</td>
                            </tr>  
                            <tr>
                                <td><p:fileUpload id="imAnu" mode="simple" value="#{publicarAnuncio.multimedia}" sizeLimit="512000" allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/></td>
                            </tr>
                            <tr>
                                <td>Dimensiones:</td>
                            </tr>
                            <tr>
                                <td><p:inputText id="Dimensiones" required="true" value="#{publicarAnuncio.dimensiones}"/></td>
                            </tr>
                            <tr>
                                <td>Nombre de la empresa:</td>
                            </tr>  
                            <tr>
                                <td><p:inputText value="#{publicarAnuncio.nombreEmpresa}" required="true" requiredMessage="Campo empresa obligatorio" /></td>
                            </tr>
                            <tr>
                                <td>Fecha de inicio:*</td>
                            </tr>
                            <tr>
                                <td><p:calendar id="datetime1" value="#{publicarAnuncio.fechaPublicacion}" pattern="MM/dd/yyyy HH:mm:ss" required="true" requiredMessage="Campo fecha obligatorio" /></td>

                            </tr>

                            <tr>
                                <td>Fecha de expiraci√≥n:*</td>
                            </tr>
                            <tr>
                                <td><p:calendar id="datetime2" value="#{publicarAnuncio.fechaExpiracion}" pattern="MM/dd/yyyy HH:mm:ss" required="true" requiredMessage="Campo fecha obligatorio"  /></td>
                            </tr>

                            <tr>
                                <td>Prioridad (1-3):</td>
                            </tr>
                            <tr>
                                <td>
                                    <p:inputText id="prioridad" value="#{publicarAnuncio.prioridad}" required="true" requiredMessage="Campo prioridad obligatorio"
                                                 validatorMessage="El valor introducido no cumple el formato">
                                        <f:validateRegex pattern="([1-3])" />
                                    </p:inputText>
                                    
                                </td>
                            </tr>
                            <tr>
                                <td>Tags:</td>
                            </tr>
                            <tr>
                                <td><p:inputTextarea  rows="10" cols="50"  queryDelay="750" minQueryLength="4" value="#{publicarAnuncio.tags}" /></td>
                            </tr>

                            <tr>                   
                                <td><h:commandButton value="Crear anuncio" action="#{publicarAnuncio.subirAnuncio()}"></h:commandButton></td>
                            </tr>
                        </table>
                    </p:panel>
                </h:form>                
            </c:when>
            <c:otherwise>
                <h3>Error, acceso denegado.</h3>
            </c:otherwise>
        </c:choose>         
    </ui:define>

</ui:composition>